{% extends "base.template.html" %}

{% block title %}My Shopping cart{% endblock %}

{% block content %}
    <h1>My Shopping cart</h1>
    {% if request.user.is_authenticated  %}
    <p>Welcome {{request.user}}</p>
    {% else %}
    <p>Please <a href="accounts/login">Login</a></p>
    {%endif%}

    <ul>
        {% for key, c in cart.items %}
        <li>
            {{c.title}} (${{c.fees}}) x {{c.qty}}<br/>
            Total Cost: ${{c.total_fees}}  <br/>       
            <form method="POST" action="{% url 'update_cart_quantity' program_id=c.id %}">
                {% csrf_token %}
                <a href="{% url 'remove_from_cart' program_id=c.id %}" class="btn btn-danger btn-sm">Remove from cart</a>
                <input type="text" name="qty" value="{{c.qty}}" style="width:40px"/>
                <input type="submit" value="Update quantity" class="btn btn-primary btn-sm"/>
            </form>
        </li>
        {%endfor%}
    </ul>
    <h3>Cart total: ${{total}}</h3>
{% endblock %}